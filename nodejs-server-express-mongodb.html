<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js: XÃ¢y dá»±ng Server-side vá»›i Express & MongoDB - Nguyá»…n Minh Nháº­t</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo"><a href="home.html"><h2>Nguyá»…n Minh Nháº­t</h2></a></div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="home.html" class="nav-link">Home</a></li>
                <li class="nav-item"><a href="cv.html" class="nav-link">CV</a></li>
                <li class="nav-item"><a href="blog.html" class="nav-link active">Blog</a></li>
                <li class="nav-item"><a href="contact.html" class="nav-link">LiÃªn há»‡</a></li>
            </ul>
            <div class="hamburger"><span class="bar"></span><span class="bar"></span><span class="bar"></span></div>
        </div>
    </nav>

    <section class="blog-detail-section">
        <div class="container">
            <div class="breadcrumb">
                <a href="home.html">Home</a>
                <span class="separator">/</span>
                <a href="blog.html">Blog</a>
                <span class="separator">/</span>
                <span class="current">Node.js Server-side</span>
            </div>

            <article class="blog-detail">
                <div class="blog-detail-header">
                    <div class="blog-meta">
                        <span class="blog-category">JavaScript</span>
                        <span class="blog-date"><i class="far fa-calendar"></i> 08/12/2024</span>
                        <span class="blog-read-time"><i class="far fa-clock"></i> 7 phÃºt Ä‘á»c</span>
                    </div>
                    <h1 class="blog-detail-title">Node.js: XÃ¢y dá»±ng Server-side vá»›i JavaScript</h1>
                    <p class="blog-detail-excerpt">Thiáº¿t láº­p web server vá»›i Express, routing cÆ¡ báº£n, káº¿t ná»‘i MongoDB vÃ  cáº¥u trÃºc project gá»n gÃ ng.</p>
                </div>

                <div class="blog-detail-content">
                    <h2><i class="fas fa-server"></i> Express.js - Framework Web máº¡nh máº½</h2>
                    <p>Express.js lÃ  framework web phá»• biáº¿n nháº¥t cho Node.js, cung cáº¥p cÃ¡c tÃ­nh nÄƒng máº¡nh máº½ Ä‘á»ƒ xÃ¢y dá»±ng web server vÃ  API. Vá»›i middleware linh hoáº¡t, routing Ä‘Æ¡n giáº£n vÃ  performance cao, Express lÃ  lá»±a chá»n hÃ ng Ä‘áº§u cho backend development.</p>

                    <div class="code-block">
                        <h4>Express app cÆ¡ báº£n vá»›i middleware</h4>
                        <pre><code>const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const morgan = require('morgan');

const app = express();

// Middleware cÆ¡ báº£n
app.use(helmet()); // Báº£o máº­t headers
app.use(cors()); // CORS handling
app.use(morgan('combined')); // Logging
app.use(express.json({ limit: '10mb' })); // JSON parsing
app.use(express.urlencoded({ extended: true })); // URL encoding

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({ 
    status: 'ok', 
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});

// Error handling middleware
app.use((err, req, res, next) => {
  console.error('Error:', err);
  res.status(500).json({ 
    message: 'Internal Server Error',
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`ğŸš€ Server running on port ${PORT}`);
});
</code></pre>
                    </div>

                    <h2><i class="fas fa-database"></i> MongoDB vá»›i Mongoose ODM</h2>
                    <p>Mongoose cung cáº¥p schema-based solution cho MongoDB, giÃºp validation, type casting, query building vÃ  business logic hooks. ÄÃ¢y lÃ  cÃ´ng cá»¥ khÃ´ng thá»ƒ thiáº¿u khi lÃ m viá»‡c vá»›i MongoDB trong Node.js.</p>

                    <div class="code-block">
                        <h4>Káº¿t ná»‘i MongoDB vÃ  Schema definition</h4>
                        <pre><code>const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');

// Káº¿t ná»‘i database
mongoose.connect(process.env.MONGO_URI, {
  useNewUrlParser: true,
  useUnifiedTopology: true,
})
.then(() => console.log('âœ… MongoDB connected'))
.catch(err => console.error('âŒ MongoDB connection error:', err));

// User Schema vá»›i validation
const userSchema = new mongoose.Schema({
  name: {
    type: String,
    required: [true, 'Name is required'],
    trim: true,
    minlength: [2, 'Name must be at least 2 characters'],
    maxlength: [50, 'Name cannot exceed 50 characters']
  },
  email: {
    type: String,
    required: [true, 'Email is required'],
    unique: true,
    lowercase: true,
    match: [/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/, 'Invalid email format']
  },
  password: {
    type: String,
    required: [true, 'Password is required'],
    minlength: [6, 'Password must be at least 6 characters']
  },
  role: {
    type: String,
    enum: ['user', 'admin'],
    default: 'user'
  },
  isActive: {
    type: Boolean,
    default: true
  }
}, {
  timestamps: true // Tá»± Ä‘á»™ng thÃªm createdAt, updatedAt
});

// Pre-save middleware Ä‘á»ƒ hash password
userSchema.pre('save', async function(next) {
  if (!this.isModified('password')) return next();
  this.password = await bcrypt.hash(this.password, 12);
  next();
});

// Instance method Ä‘á»ƒ so sÃ¡nh password
userSchema.methods.comparePassword = async function(candidatePassword) {
  return await bcrypt.compare(candidatePassword, this.password);
};

const User = mongoose.model('User', userSchema);
</code></pre>
                    </div>

                    <div class="code-block">
                        <h4>CRUD Operations vá»›i Error Handling</h4>
                        <pre><code>// GET /users - Láº¥y danh sÃ¡ch users vá»›i pagination
app.get('/users', async (req, res) => {
  try {
    const page = parseInt(req.query.page) || 1;
    const limit = parseInt(req.query.limit) || 10;
    const skip = (page - 1) * limit;

    const users = await User.find({ isActive: true })
      .select('-password') // Loáº¡i bá» password khá»i response
      .skip(skip)
      .limit(limit)
      .sort({ createdAt: -1 });

    const total = await User.countDocuments({ isActive: true });

    res.json({
      users,
      pagination: {
        page,
        limit,
        total,
        pages: Math.ceil(total / limit)
      }
    });
  } catch (error) {
    res.status(500).json({ message: 'Error fetching users', error: error.message });
  }
});

// POST /users - Táº¡o user má»›i
app.post('/users', async (req, res) => {
  try {
    const { name, email, password } = req.body;
    
    // Kiá»ƒm tra email Ä‘Ã£ tá»“n táº¡i
    const existingUser = await User.findOne({ email });
    if (existingUser) {
      return res.status(400).json({ message: 'Email already exists' });
    }

    const user = await User.create({ name, email, password });
    
    // Loáº¡i bá» password khá»i response
    const userResponse = user.toObject();
    delete userResponse.password;
    
    res.status(201).json(userResponse);
  } catch (error) {
    if (error.name === 'ValidationError') {
      const errors = Object.values(error.errors).map(err => err.message);
      return res.status(400).json({ message: 'Validation Error', errors });
    }
    res.status(500).json({ message: 'Error creating user', error: error.message });
  }
});

// PUT /users/:id - Cáº­p nháº­t user
app.put('/users/:id', async (req, res) => {
  try {
    const { id } = req.params;
    const updates = req.body;

    // KhÃ´ng cho phÃ©p cáº­p nháº­t password qua endpoint nÃ y
    delete updates.password;

    const user = await User.findByIdAndUpdate(
      id, 
      updates, 
      { new: true, runValidators: true }
    ).select('-password');

    if (!user) {
      return res.status(404).json({ message: 'User not found' });
    }

    res.json(user);
  } catch (error) {
    res.status(500).json({ message: 'Error updating user', error: error.message });
  }
});
</code></pre>
                    </div>

                    <h2><i class="fas fa-folder-tree"></i> Cáº¥u trÃºc dá»± Ã¡n chuyÃªn nghiá»‡p</h2>
                    <p>Má»™t cáº¥u trÃºc dá»± Ã¡n tá»‘t giÃºp code dá»… maintain, scale vÃ  collaborate. DÆ°á»›i Ä‘Ã¢y lÃ  cáº¥u trÃºc Ä‘Æ°á»£c khuyáº¿n nghá»‹ cho Express + MongoDB project:</p>

                    <div class="code-block">
                        <h4>Cáº¥u trÃºc thÆ° má»¥c</h4>
                        <pre><code>project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.js              # Khá»Ÿi táº¡o Express app
â”‚   â”œâ”€â”€ server.js           # Start server
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ database.js     # DB connection config
â”‚   â”‚   â””â”€â”€ environment.js  # Environment variables
â”‚   â”œâ”€â”€ controllers/        # Business logic
â”‚   â”‚   â”œâ”€â”€ userController.js
â”‚   â”‚   â””â”€â”€ authController.js
â”‚   â”œâ”€â”€ models/            # Mongoose models
â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â””â”€â”€ Product.js
â”‚   â”œâ”€â”€ routes/            # API routes
â”‚   â”‚   â”œâ”€â”€ userRoutes.js
â”‚   â”‚   â”œâ”€â”€ authRoutes.js
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ middleware/        # Custom middleware
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ validation.js
â”‚   â”‚   â””â”€â”€ errorHandler.js
â”‚   â”œâ”€â”€ utils/            # Helper functions
â”‚   â”‚   â”œâ”€â”€ logger.js
â”‚   â”‚   â””â”€â”€ response.js
â”‚   â””â”€â”€ tests/            # Test files
â”‚       â”œâ”€â”€ unit/
â”‚       â””â”€â”€ integration/
â”œâ”€â”€ .env                   # Environment variables
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â””â”€â”€ README.md
</code></pre>
                    </div>

                    <div class="code-block">
                        <h4>app.js - Main application file</h4>
                        <pre><code>const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const morgan = require('morgan');
const rateLimit = require('express-rate-limit');

const errorHandler = require('./middleware/errorHandler');
const routes = require('./routes');

const app = express();

// Security middleware
app.use(helmet());

// CORS configuration
app.use(cors({
  origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000'],
  credentials: true
}));

// Rate limiting
const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100, // limit each IP to 100 requests per windowMs
  message: 'Too many requests from this IP'
});
app.use('/api/', limiter);

// Logging
app.use(morgan('combined'));

// Body parsing
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true }));

// Routes
app.use('/api', routes);

// Health check
app.get('/health', (req, res) => {
  res.json({ status: 'ok', timestamp: new Date().toISOString() });
});

// Error handling
app.use(errorHandler);

module.exports = app;
</code></pre>
                    </div>

                    <h2><i class="fas fa-shield-alt"></i> Báº£o máº­t vÃ  Performance</h2>
                    <p>Báº£o máº­t lÃ  yáº¿u tá»‘ quan trá»ng nháº¥t trong web development. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c best practices cáº§n thiáº¿t:</p>

                    <div class="code-block">
                        <h4>Authentication vá»›i JWT</h4>
                        <pre><code>const jwt = require('jsonwebtoken');
const bcrypt = require('bcryptjs');

// JWT Secret (nÃªn lÆ°u trong .env)
const JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';
const JWT_EXPIRES_IN = process.env.JWT_EXPIRES_IN || '7d';

// Login endpoint
app.post('/auth/login', async (req, res) => {
  try {
    const { email, password } = req.body;

    // TÃ¬m user
    const user = await User.findOne({ email }).select('+password');
    if (!user) {
      return res.status(401).json({ message: 'Invalid credentials' });
    }

    // Kiá»ƒm tra password
    const isPasswordValid = await user.comparePassword(password);
    if (!isPasswordValid) {
      return res.status(401).json({ message: 'Invalid credentials' });
    }

    // Táº¡o JWT token
    const token = jwt.sign(
      { userId: user._id, email: user.email, role: user.role },
      JWT_SECRET,
      { expiresIn: JWT_EXPIRES_IN }
    );

    res.json({
      message: 'Login successful',
      token,
      user: {
        id: user._id,
        name: user.name,
        email: user.email,
        role: user.role
      }
    });
  } catch (error) {
    res.status(500).json({ message: 'Login failed', error: error.message });
  }
});

// Middleware xÃ¡c thá»±c
const authenticateToken = (req, res, next) => {
  const authHeader = req.headers['authorization'];
  const token = authHeader && authHeader.split(' ')[1];

  if (!token) {
    return res.status(401).json({ message: 'Access token required' });
  }

  jwt.verify(token, JWT_SECRET, (err, user) => {
    if (err) {
      return res.status(403).json({ message: 'Invalid or expired token' });
    }
    req.user = user;
    next();
  });
};

// Protected route
app.get('/profile', authenticateToken, async (req, res) => {
  try {
    const user = await User.findById(req.user.userId).select('-password');
    res.json(user);
  } catch (error) {
    res.status(500).json({ message: 'Error fetching profile', error: error.message });
  }
});
</code></pre>
                    </div>

                    <div class="code-block">
                        <h4>Environment Variables (.env)</h4>
                        <pre><code># Database
MONGO_URI=mongodb://localhost:27017/myapp
# hoáº·c MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/dbname

# JWT
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=7d

# Server
PORT=3000
NODE_ENV=development

# CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
</code></pre>
                    </div>

                    <h2><i class="fas fa-tools"></i> Middleware tÃ¹y chá»‰nh</h2>
                    <p>Middleware lÃ  trÃ¡i tim cá»§a Express.js, cho phÃ©p xá»­ lÃ½ request/response pipeline má»™t cÃ¡ch linh hoáº¡t:</p>

                    <div class="code-block">
                        <h4>Custom Middleware Examples</h4>
                        <pre><code>// Logging middleware
const logger = (req, res, next) => {
  console.log(`${new Date().toISOString()} - ${req.method} ${req.path}`);
  next();
};

// Request ID middleware
const requestId = (req, res, next) => {
  req.id = Math.random().toString(36).substr(2, 9);
  res.setHeader('X-Request-ID', req.id);
  next();
};

// Validation middleware
const validateUser = (req, res, next) => {
  const { name, email, password } = req.body;
  const errors = [];

  if (!name || name.trim().length < 2) {
    errors.push('Name must be at least 2 characters');
  }
  if (!email || !/^\S+@\S+\.\S+$/.test(email)) {
    errors.push('Valid email is required');
  }
  if (!password || password.length < 6) {
    errors.push('Password must be at least 6 characters');
  }

  if (errors.length > 0) {
    return res.status(400).json({ message: 'Validation failed', errors });
  }

  next();
};

// Error handling middleware
const errorHandler = (err, req, res, next) => {
  console.error('Error:', err);

  // Mongoose validation error
  if (err.name === 'ValidationError') {
    const errors = Object.values(err.errors).map(e => e.message);
    return res.status(400).json({ message: 'Validation Error', errors });
  }

  // Mongoose duplicate key error
  if (err.code === 11000) {
    const field = Object.keys(err.keyValue)[0];
    return res.status(400).json({ message: `${field} already exists` });
  }

  // JWT errors
  if (err.name === 'JsonWebTokenError') {
    return res.status(401).json({ message: 'Invalid token' });
  }

  if (err.name === 'TokenExpiredError') {
    return res.status(401).json({ message: 'Token expired' });
  }

  // Default error
  res.status(err.status || 500).json({
    message: err.message || 'Internal Server Error',
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
};

// Apply middleware
app.use(requestId);
app.use(logger);
app.use('/api/users', validateUser);
app.use(errorHandler);
</code></pre>
                    </div>

                    <h2><i class="fas fa-chart-line"></i> Performance Optimization</h2>
                    <p>Tá»‘i Æ°u hÃ³a performance lÃ  yáº¿u tá»‘ quan trá»ng Ä‘á»ƒ Ä‘áº£m báº£o á»©ng dá»¥ng cháº¡y mÆ°á»£t mÃ :</p>

                    <div class="code-block">
                        <h4>Caching vÃ  Database Optimization</h4>
                        <pre><code>const redis = require('redis');
const client = redis.createClient(process.env.REDIS_URL);

// Redis caching middleware
const cache = (duration = 300) => {
  return async (req, res, next) => {
    const key = `cache:${req.originalUrl}`;
    
    try {
      const cached = await client.get(key);
      if (cached) {
        return res.json(JSON.parse(cached));
      }
      
      // Store original res.json
      const originalJson = res.json;
      res.json = function(data) {
        client.setex(key, duration, JSON.stringify(data));
        return originalJson.call(this, data);
      };
      
      next();
    } catch (error) {
      console.error('Cache error:', error);
      next();
    }
  };
};

// Database indexing
// Trong MongoDB, táº¡o indexes Ä‘á»ƒ tÄƒng tá»‘c queries
db.users.createIndex({ email: 1 }, { unique: true });
db.users.createIndex({ createdAt: -1 });
db.users.createIndex({ name: 'text', email: 'text' }); // Text search

// Pagination vá»›i lean() Ä‘á»ƒ tá»‘i Æ°u memory
app.get('/users', async (req, res) => {
  const page = parseInt(req.query.page) || 1;
  const limit = parseInt(req.query.limit) || 10;
  const skip = (page - 1) * limit;

  const users = await User.find()
    .select('-password')
    .lean() // Tráº£ vá» plain objects thay vÃ¬ Mongoose documents
    .skip(skip)
    .limit(limit)
    .sort({ createdAt: -1 });

  res.json(users);
});
</code></pre>
                    </div>

                    <h2><i class="fas fa-bug"></i> Testing vá»›i Jest</h2>
                    <p>Testing lÃ  pháº§n khÃ´ng thá»ƒ thiáº¿u trong development process. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch setup testing cho Express app:</p>

                    <div class="code-block">
                        <h4>Test Setup vá»›i Jest vÃ  Supertest</h4>
                        <pre><code>// tests/setup.js
const mongoose = require('mongoose');
const { MongoMemoryServer } = require('mongodb-memory-server');

let mongoServer;

beforeAll(async () => {
  mongoServer = await MongoMemoryServer.create();
  const mongoUri = mongoServer.getUri();
  await mongoose.connect(mongoUri);
});

afterAll(async () => {
  await mongoose.disconnect();
  await mongoServer.stop();
});

// tests/user.test.js
const request = require('supertest');
const app = require('../src/app');
const User = require('../src/models/User');

describe('User API', () => {
  beforeEach(async () => {
    await User.deleteMany({});
  });

  describe('POST /api/users', () => {
    it('should create a new user', async () => {
      const userData = {
        name: 'John Doe',
        email: 'john@example.com',
        password: 'password123'
      };

      const response = await request(app)
        .post('/api/users')
        .send(userData)
        .expect(201);

      expect(response.body.name).toBe(userData.name);
      expect(response.body.email).toBe(userData.email);
      expect(response.body.password).toBeUndefined();
    });

    it('should return 400 for invalid data', async () => {
      const invalidData = {
        name: 'J',
        email: 'invalid-email',
        password: '123'
      };

      const response = await request(app)
        .post('/api/users')
        .send(invalidData)
        .expect(400);

      expect(response.body.message).toBe('Validation Error');
    });
  });

  describe('GET /api/users', () => {
    it('should return list of users', async () => {
      // Create test users
      await User.create([
        { name: 'User 1', email: 'user1@example.com', password: 'password' },
        { name: 'User 2', email: 'user2@example.com', password: 'password' }
      ]);

      const response = await request(app)
        .get('/api/users')
        .expect(200);

      expect(response.body.users).toHaveLength(2);
    });
  });
});
</code></pre>
                    </div>

                    <h2><i class="fas fa-rocket"></i> Deployment vÃ  Production</h2>
                    <p>Deploy á»©ng dá»¥ng lÃªn production cáº§n chÃº Ã½ nhiá»u yáº¿u tá»‘ vá» security, performance vÃ  monitoring:</p>

                    <div class="code-block">
                        <h4>Docker Configuration</h4>
                        <pre><code># Dockerfile
FROM node:18-alpine

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci --only=production

# Copy source code
COPY . .

# Create non-root user
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nodejs -u 1001
USER nodejs

EXPOSE 3000

CMD ["node", "src/server.js"]

# docker-compose.yml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - MONGO_URI=mongodb://mongo:27017/myapp
    depends_on:
      - mongo
      - redis

  mongo:
    image: mongo:5.0
    volumes:
      - mongo_data:/data/db
    ports:
      - "27017:27017"

  redis:
    image: redis:6-alpine
    ports:
      - "6379:6379"

volumes:
  mongo_data:
</code></pre>
                    </div>

                    <div class="code-block">
                        <h4>PM2 Process Manager</h4>
                        <pre><code># ecosystem.config.js
module.exports = {
  apps: [{
    name: 'myapp',
    script: 'src/server.js',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'development',
      PORT: 3000
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    error_file: './logs/err.log',
    out_file: './logs/out.log',
    log_file: './logs/combined.log',
    time: true
  }]
};

# Start vá»›i PM2
pm2 start ecosystem.config.js --env production
pm2 monit
</code></pre>
                    </div>

                    <h2><i class="fas fa-chart-bar"></i> Monitoring vÃ  Logging</h2>
                    <p>Monitoring giÃºp theo dÃµi performance vÃ  phÃ¡t hiá»‡n issues sá»›m:</p>

                    <div class="code-block">
                        <h4>Winston Logger Setup</h4>
                        <pre><code>const winston = require('winston');

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.json()
  ),
  defaultMeta: { service: 'myapp' },
  transports: [
    new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),
    new winston.transports.File({ filename: 'logs/combined.log' }),
  ],
});

if (process.env.NODE_ENV !== 'production') {
  logger.add(new winston.transports.Console({
    format: winston.format.simple()
  }));
}

// Health check endpoint
app.get('/health', (req, res) => {
  const healthcheck = {
    uptime: process.uptime(),
    message: 'OK',
    timestamp: Date.now(),
    memory: process.memoryUsage(),
    pid: process.pid
  };
  
  logger.info('Health check', healthcheck);
  res.json(healthcheck);
});
</code></pre>
                    </div>

                    <h2><i class="fas fa-image"></i> Kiáº¿n trÃºc tá»•ng quan</h2>
                    <div class="code-block">
                        <h4>Express + MongoDB Architecture</h4>
                        <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client App    â”‚    â”‚   Load Balancer â”‚    â”‚   CDN/Static    â”‚
â”‚   (React/Vue)   â”‚â—„â”€â”€â–ºâ”‚   (Nginx)       â”‚â—„â”€â”€â–ºâ”‚   Assets        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Express API   â”‚
                    â”‚   (Node.js)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                   â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   MongoDB   â”‚    â”‚    Redis    â”‚
            â”‚  (Database) â”‚    â”‚   (Cache)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Request Flow:
1. Client â†’ Load Balancer
2. Load Balancer â†’ Express App
3. Express â†’ Middleware Pipeline
4. Express â†’ Controllers
5. Controllers â†’ Models
6. Models â†’ MongoDB
7. Response â† Express â† Client
</code></pre>
                    </div>

                    <h2><i class="fas fa-book"></i> TÃ i liá»‡u tham kháº£o vÃ  Resources</h2>
                    <ul>
                        <li><a href="https://expressjs.com/" target="_blank" rel="noopener">Express.js Official Documentation</a></li>
                        <li><a href="https://mongoosejs.com/" target="_blank" rel="noopener">Mongoose ODM Documentation</a></li>
                        <li><a href="https://nodejs.org/en/docs/" target="_blank" rel="noopener">Node.js Documentation</a></li>
                        <li><a href="https://docs.mongodb.com/" target="_blank" rel="noopener">MongoDB Documentation</a></li>
                        <li><a href="https://jestjs.io/" target="_blank" rel="noopener">Jest Testing Framework</a></li>
                        <li><a href="https://pm2.keymetrics.io/" target="_blank" rel="noopener">PM2 Process Manager</a></li>
                        <li><a href="https://www.docker.com/" target="_blank" rel="noopener">Docker Containerization</a></li>
                    </ul>

                    <!-- Blog Post Navigation -->
                    <div class="blog-post-navigation">
                        <a href="microservices-spring-cloud.html" class="nav-post prev">
                            <i class="fas fa-arrow-left nav-post-icon"></i>
                            <div class="nav-post-content">
                                <h4>BÃ i trÆ°á»›c</h4>
                                <h3>Microservices vá»›i Spring Cloud</h3>
                            </div>
                        </a>
                        
                        <a href="react-lifecycle-state-management.html" class="nav-post next">
                            <i class="fas fa-arrow-right nav-post-icon"></i>
                            <div class="nav-post-content">
                                <h4>BÃ i tiáº¿p theo</h4>
                                <h3>React Lifecycle & State Management</h3>
                            </div>
                        </a>
                    </div>
                    
                    <div class="blog-navigation">
                        <a href="blog.html" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Quay láº¡i Blog</a>
                    </div>
                </div>
            </article>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section"><h3>DevBlog</h3><p>Chia sáº» kiáº¿n thá»©c láº­p trÃ¬nh Java & JavaScript</p></div>
                <div class="footer-section"><h4>LiÃªn káº¿t</h4>
                    <ul>
                        <li><a href="home.html">Home</a></li>
                        <li><a href="cv.html">CV</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="contact.html">LiÃªn há»‡</a></li>
                    </ul>
                </div>
                <div class="footer-section"><h4>Káº¿t ná»‘i</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom"><p>&copy; 2025 Nguyá»…n Minh Nháº­t. Táº¥t cáº£ quyá»n Ä‘Æ°á»£c báº£o lÆ°u.</p></div>
        </div>
    </footer>

    <script src="script.js"></script>
    </body>
    </html>


